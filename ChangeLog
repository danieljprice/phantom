c0631f3 (release) updated version to v1.0
4c5ff86 (cooling) updated default C, O, Si abundances to match Sembach+ 2000
24a3975 (test_derivs) compiler warning fixed
6b04a59 (force) build failure in testgrav fixed, plus fixed a few more compiler warnings
9e3b5b2 Update comments to give more accurate reference details
e5c4f41 (mpi) build failure from previous commits fixed
daa5b84 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
52f2555 (make) compiler warnings fixed
9271d04 (make) compiler warnings fixed
135f703 (cooling) compiler warning fixed
e7302b7 [header-bot] updated file headers
1828263 (kh test) Updated defaults for Kelvin-Helmholtz test setup
2c2f352 [author-bot] updated AUTHORS file
b6862f2 [header-bot] updated file headers
9229f11 (evlog) corrected format of CoM
c82d4fd (check errors) bug fix for checking conservation of centre of mass
5eb3d57 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
41e5859 [space-bot] whitespace at end of lines removed
fc2cbd0 (test_ptmass) removed redundant initialisations
ad997e4 (test_ptmass) initialised Bevol
8735337 (force: B/rho) only defining Bxi,Byi,Bzi if mhd=true
84627d4 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
8ad584a (analysisCE) build failure fix
e167c92 (phantom2divb) build failure fix [skip ci]
9dd7589 (test_ptmass) clean up dog-doos following ptmass tests
d15f217 (test) clean up doggie doos in build dir after sedov test
217973a (h2cooling) minor tidying of cooling routines in prep for cooling tests
6743ea1 (initial) moved a few initialisation commands for cleanliness only
e46778d (initial) bug fix: dtmax can again be optionally decreased when a given density is reached
f39793f (dust) revert f0a1825 due to test failures
2cdef90 (moddump) build failure fix
14f5f4a [indent-bot] standardised indentation
a03b12c [author-bot] updated AUTHORS file
78fa9d5 [space-bot] whitespace at end of lines removed
13f99c4 [header-bot] updated file headers
c374c14 (setup_mhdwave) new subroutine to test MHD wave propagation test as per section 5.1 of Iwasaki (2015)
1f2975c (analysis) replaced Bevol with Bxyz is analysis routines
c09a440 (mpi) further verboseness reductions
7348348 (mpi) silenced real*4 conversion warning when reading small dumps (too verbose with mpi)
5be03c3 (mpi) reduce verboseness of read_dump with MPI=yes
3e51ba3 (mpi) reduce verboseness when running test suite [skip ci]
8d4eace (planetdisc) setup_planetdisc_comparison->setup_planetdisc
8c117cc (header-bot) updated year to 2018 [skip ci]
0172e6d (setup_wave) obsolete subroutine removed
b7e82c9 (rnbinary) obsolete rnbinary setup removed [skip ci]
514cf1d (setup) cut out unused real4 in only statements
75e881a (g2_wind) removed obsolete setup_g2_wind routine [skip ci]
4e0cd10 (starinbox) deleted obsolete starinbox setup [skip ci]
b140409 (B/rho) updated setup routines
84e6aa4 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
dc19f90 (B/rho) updated setup routines
18626b8 (setup_turb) update for B/rho; now write common defaults for dusty/mhd turbulence
be43ab4 (nightly) link in slack message refers to archived html page, not current one, so link still works for old build messages [skip ci]
fe348b1 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
f07eefd (evlog) centre of mass output appears after linear momentum
ed42003 (B/rho) fixed shock and generic mag field setup to work with B/rho; perform sanity checks on magnetic field setup
f0a1825 (dust) tstop approximation: use only rhogas, not rhogas+rhodust, to determine stopping time
745c537 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
50cac65 (blob) build failure in SETUP=blob fixed [skip ci]
c557bc6 (mailmap) updated .mailmap [skip ci]
9ef6f94 (test_nimhd) pre-emptive build failure fix, courtesy of the pipeline test
14ac529 (test_nimhd) updated to pass with B/rho as the conserved variable
50c0b4e [indent-bot] standardised indentation
75d59b0 [author-bot] updated AUTHORS file
270e0e7 [space-bot] whitespace at end of lines removed
7c942ab [header-bot] updated file headers
f97535b Merge branch 'master' of https://bitbucket.org/danielprice/phantom
23d6c4e (mhd) Magnetic field now evolved using B/rho instead of B
0bd2d92 (mhd) removed last of obsolete magnetic vector potential code
b27ae35 (mhd) Removed obsolete code for magnetic vector potential
efc6c63 (analysisCE) build failure fixed
6587d69 (dens) removed the else redo_neighbours from commit 07f52bf
c2f7f0a Merge branch 'master' of https://bitbucket.org/danielprice/phantom
e461bba (mcfost) Adding Voronoi domain limits to the interface
278d239 (forcing) now lfs pointer
6f6b4c1 (analysis_dustydisc) removed redundant if use_dustfrac
629916b [indent-bot] standardised indentation
75f3221 [author-bot] updated AUTHORS file
0c814f9 [space-bot] whitespace at end of lines removed
7e9e2cc [header-bot] updated file headers
07f52bf (density) will only search for larger hmax in non-empty cells; this will fix the test failure
a2410d0 (nonideal MHD) updated value to prevent test failure
0969ba2 (force: mhd) modified the transition region where the entire Borve term is subrtracted to none is subtracted
4a1cdb5 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
ea6426f Updated the SYSTEM setting for the Lyon cluster
4dc5c17 (eos) Updating the MESA EoS code portions
3614c63 (setup_sphereinbox) set default number of particles in sphere; default is one of three options based upon maxp
788ed9f (mcfost) Removing libcurl dependency
a40b4f1 [author-bot] updated AUTHORS file
02ea414 (git-lfs) use git-lfs automatically for anything ending in .dat
d40c2c4 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
ebebc91 (sedov) uses individual timesteps by default
cfc5e5f (mpi) enabled particle waking in MPI
0bb086c (mpi) fix hang when determing when to write ev
7805bc3 (mpi) bugfix missing openmp statements
c916078 [indent-bot] standardised indentation
ca8dc6d [author-bot] updated AUTHORS file
96c097d [space-bot] whitespace at end of lines removed
da54e1a [header-bot] updated file headers
f489468 (evwrite) bug fix from commit  f0db843 where data was printed to log rather than .ev
8d28380 (setup_mhdblast) plasma beta is now an input parameter
f0db843 (debug) modified default gfortran flags for debug=yes; fixed test failures triggered with new flags
7a2260f (ptmass) corrected typo in comment
6f88a0c (setup_shock) modified default shock if MHD=yes
5db2c61 Merge remote-tracking branch 'origin/master'
6701be7 (mpi) another divide-by-zero bugfix in verbose mode
5b0af97 (mpi) bugfix divide-by-zero in verbose mode
be362f0 Merge branch 'master' of bitbucket.org:danielprice/phantom
77b373c Merge remote-tracking branch 'origin/master'
e66a24c (mcfost) Setting up the eos properly in setup_disc
a416eaf Merge branch 'master' of https://bitbucket.org/danielprice/phantom
22fb787 (mpi) tidy makefile
0cde5a6 Merge branch 'master' of bitbucket.org:danielprice/phantom
53bec48 (mcfost) Call to mcfost is now done via the runtime parameter use_mcfost
2fba204 (mpi) bugfix: update ibelongs when shuffling particles
7f3a92e (mpi) rearrange compile order
2a8d746 (g2) fix MPI issue with make test (thanks J-F)
73aced7 (pyanalysis) analyse your phantom dumps with python
163a4c1 (nonideal mhd: test) commited updated test intended for earlier commit
0b20da7 [author-bot] updated AUTHORS file
a2516bf [space-bot] whitespace at end of lines removed
74687d4 [header-bot] updated file headers
d2175de (mpi) bugfix for parallel tree construction
b56b5e2 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
620befc (test_nonideal MHD) turned test back on
4d3bad0 Added force on sink columns to .ev file
b1bf184 (galcen) detleted obsolete galcen setup routine
4d2905b (galcen) updated setup to include low density background
a30662e (cmacionise) changed preprocessor and logical names to match the actual external code name and style
b43c0d9 (writegitinfo) will now say none if there are no locally modified files
39b2b77 (nonideal mhd) updated nicil routines to prevent testfailure; ex_eta is now from current version
137b794 (Makefile) added default debug flags
0c07d46 (nonideal mhd: test) temporarily disabled a test
38228e8 (analysis_disc_RadMass) corrected build failure to fix array size
abae94c (checkoptions) fixed test fail caused by commit  9206492
b3ef3ce [indent-bot] standardised indentation
50e7fdc [format-bot] end if -> endif; end do -> enddo
7a7cadb [author-bot] updated AUTHORS file
8e0061b Merge branch 'master' of https://bitbucket.org/danielprice/phantom
b4aee4f (setup) obsolete setup_dustygrain removed
151753a (header) will now write used pre-processor flags to the logfile
08b0bb5 (tracers) deleted obsolet setup_tracers routines
549dd28 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
ed92012 (random) removed obsolete random number generators; use only GPL code
8ea4172 (mesa) now cubic spline interpolation for getgamma1 in mesa
3bf1b70 Merge branch 'master' of http://bitbucket.org/danielprice/phantom
6cc00be (mesa) getgamma1 in mesa_microphysics now uses cubic spline interpolation
0904202 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
9206492 (nonidealmhd) enforcing incompatibility of nonideal mhd and use_cmac_ionise
89591d5 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
ce4c713 (setup) deleted obsolete setup_anyrho
e108707 (Makefile) dual-purposed n_electronT array for nonideal MHD and ionisation fractions
46ca07c (part) dual-purposed n_electronT array for nonideal MHD and ionisation fractions
0e88fd3 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
8e94eea Edited lyoccf entry for SYSTEM
30f8ee2 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
f99007e updated .mailmap
23a31bd Merge branch 'master' of https://bitbucket.org/danielprice/phantom
d61b6dc [author-bot] updated AUTHORS file
3142624 (mcfost) Updating makefile to compile with the new version of cfitsio
b6f2638 (nonideal MHD) updated test to be compatible with v1.2.3
2f55b91 (conservation laws) fixed build failue and compiler warning
a290298 [indent-bot] standardised indentation
c5f9302 [header-bot] updated file headers
03cc011 (non-ideal mhd) added file intended for previous commit
20f0ac3 (non-ideal MHD) removed obsolete subroutine
f0c3e16 (non-ideal MHD) updated to version 1.2.3 of NICIL
9600308 (rotational energy) now using centre of mass from previous commit rather than recalculating it
b44496a (conservation laws) must also conserve centre-of-mass location if linear momentum should be conserved
a5473cd [author-bot] updated AUTHORS file
57286e2 [space-bot] whitespace at end of lines removed
47c14ea [header-bot] updated file headers
797f70b (setup_galaxies) allows two different resolutions of galaxies to be modelled; general cleaning of setup; changing default settings
5bef3dc (set_unifdis) increased size of np when written out
46f6e4a (part) trivial format change to align variables
4b8ec06 (Makefile) added comment to SYSTEM=gstar
be88b29 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
2aab912 (SYSTEM=raijin) minor changes to configuration; works on knights landing architecture
26867f1 setting spsoundj=0 if usej=F to compute the correct tstop
db90d06 (build) change -qopenmp to -openmp by default for ifort to avoid issues with older ifort versions
1d4a649 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
0a2ddd9 (build) obsolete SETUP=potsdam removed; bug fix with Makefile flags for adiabaticdisc
14473ad (setup_disc) print disc-binary angle
b1ab5e1 (disc setup) #3 fixed setting smoothing of circumbinary
1db52cc [author-bot] updated AUTHORS file
cb2ddeb fixed initial erroneous message dust mass = 0 and minor changes
219d9dc [author-bot] updated AUTHORS file
9ff3076 [space-bot] whitespace at end of lines removed
6827b92 [header-bot] updated file headers
d21bad0 Major tidying of code
fae33ee (statsbot) plot legend fixed
47768e2 (statsbot) number of SETUP= and SYSTEM= options added
2b2eeda Merge branch 'master' of https://bitbucket.org/danielprice/phantom
8f87fdb (statsbot) lines commented
2191526 (statsbot) couple more stats added + link in slack post fixed
c1d37dd (Makefile) Removed system=zen since computer has been decommissioned
6d39415 [indent-bot] standardised indentation
8227292 added case to analysis_common_envelope.F90 to output td quantities from the MESA EOS
0974e11 [author-bot] updated AUTHORS file
be0fd7d [space-bot] whitespace at end of lines removed
3d7d701 [tab-bot] tabs removed
61c3b2d Added other outputs to case 15 of analysis_common_envelope.F90
4902000 Added other outputs to case 15 of analysis_common_envelope.F90
aeb62bd (disc setup) make smoothing inner disc a .setup file option
db45944 removed new warnings
5113ac8 [author-bot] updated AUTHORS file
b0fd753 (disc setup and analysis) minor changes and stokes number corrected
4adc1ad (disc setup) set number of particles (including dust) to be less than default MAXP
652d04b [author-bot] updated AUTHORS file
30103b6 fixed error in previous commit
781c31c [indent-bot] standardised indentation
a365668 [author-bot] updated AUTHORS file
2c2d013 change of variable to enforce 0<dustfrac<1
092be4d [author-bot] updated AUTHORS file
6ba87fe [tab-bot] tabs removed
5f5840e (Makefile) Dont Repeat Yourself: use include lines instead of cut-and-paste for SYSTEM blocks; just state differences from default setup for each compiler
3ee9028 (build) removed obsolete SYSTEM blocks; deleted SETUP=tidal; skip obsolete SETUPs in buildbot
75961f4 (statsbot) bug fixes with buildbot timings plot
7c87a07 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
c265369 (statsbot) graph nightly timings for buildbot
186bb76 adapted analysis so that it can read outputs with numbers > 10000
eb0f288 Added temperature and pressure as outputs in case 15 of analysis_common_envelope.F90
619d2b0 [author-bot] updated AUTHORS file
864bd8e [header-bot] updated file headers
626d251 (options) aligned variables; formatting chagne only
bda34ba (dumps) can now set the maximum wall-time between dumps
3aa5900 removed compiler warnings
0b364cc (disc setup) #3 read profile_set_dust before using it
a74844d (author-bot) fixed bug with nightly script failing to update AUTHORS file
b4b7c86 (statsbot) count+plot lines of code
0587793 [author-bot] updated AUTHORS file
538a0ad (evol) will promote nfulldumps=1 if dtmax is decreased
bd03680 (statsbot) updated nightly run script
6d0fdcb (statsbot) plots wall time from nightly test runs
238dd11 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
e373c95 [author-bot] updated AUTHORS file
58672a7 (statsbot) added nightly stats re: build status
a9e101e [author-bot] updated AUTHORS file
13cbd98 [author-bot] updated AUTHORS file
441bf3e (statsbot) bug fix in chart drawing
251d37a (authors) updated .mailmap
71274ff (statsbot) fixed issues with writing files
736719f [author-bot] updated AUTHORS file
7470d03 (statsbot) updated output file locations
df676eb Merge branch 'master' of https://bitbucket.org/danielprice/phantom
4c34057 (stats-bot) added functionality to plot nightly stats
331970b (particle waking) corrected ibin_neigh to work with MPI; turned off ibin_wake for MPI
c8a4f48 (test_nonidealmhd) removed duplicate definition of variable
1fdceeb (setup_sedov) will not overwrite values if .in file exists
b5be34f [indent-bot] standardised indentation
1ca9a70 [space-bot] whitespace at end of lines removed
a213bbd [header-bot] updated file headers
21722c7 [tab-bot] tabs removed
7a4f887 added the option to extract entropy from the MESA eos
6a09d11 fixed typo
038dfda added new function to get various quantities from the eos
7d21cb1 (step) test suite failure fixed
baacac1 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
a38d6a8 (balsarakim) use chemistry + ind_timesteps by default
0b0d494 (kdtree) readded format change for clarity; no numerical or physical changes
2043ff3 (config) reduce default maxp to fix timeout in MPI pipeline build
66b4a4c FIX SLOWDOWN/TEST FAILURES: revert b3748c3 (too many issues, unfortunately)
cb63a52 (setup_unifdis) read units and boundaries from .setup file; initialise H2 chemistry if compiled
78baebc (cooling) openMP bug fix
bca0331 (cooling) forgot to commit a couple of files
9c505ca (cooling) added cooltable to data directory
b5b3e17 (cooling) added implementation of Townsend (2009) cooling; not yet tested, use with caution
ca37f59 (setup) added setup + injection routine for Balsara-Kim (2004) test
49921ac [header-bot] updated file headers
e125e3e (setup_unifdis) added .setup file for general uniform setup; also fixed for non-isothermal case
fecdda8 [indent-bot] standardised indentation
45fae9b (individual dt) implemented particle waking
f6ffc81 [space-bot] whitespace at end of lines removed
8123a8e Merge branch 'master' of https://bitbucket.org/danielprice/phantom
e2d658a (setup_disc) bug fix with read/write of alphaSS when printing multiple .setup files
5ed0ce1 [indent-bot] standardised indentation
42c2530 [header-bot] updated file headers
a213e4d (setup_shock) added comments; removed unused variable; added dtmax to BrioWu shock
a1b21ee (kdtree) format change only: added comments and lables; reordered terms for readability
220fdff (analysis_discRadMass) additional output
5b6761e (eos) renamed ieos -> eos_type when the variable is passed in to prevent duplication with the public variable
e723deb (commons) decreased max output time between dumps to 12h
78c2ed4 (setup_mhdblast) added setup to model MHD blast wave
a129c4c (datafiles) build failure in previous commit fixed
2e412ee (datafiles) minor bug fix with automated download of data files
a581ed6 (kdtree) bug fix from previous commit; compiler warning fixed
a3b6c22 (kdtree) compiler warnings fixed [skip ci]
730e542 (kdtree) fixed build failures with OPENMP=no
d6e1be6 [indent-bot] standardised indentation
b3748c3 Change the breadth-first maketree section to use nested OpenMP threading.
8d15197 [header-bot] updated file headers
9e39a35 [format-bot] obsolete .gt. .lt. .ge. .le. .eq. .ne. replaced
f1117be (setup_disc) #3 multiple discs: set H/R such that temperature is globally constant (appropriate for ieos=1); add label for circum-binary, -primary, -secondary for *.discparams file
00019a2 fixed galdisc setup so works with MPI
81b9546 Merge branch 'master' of bitbucket.org:danielprice/phantom
2aa6932 (analysis_dustydisc) fixed line that caused build fail
22f3c66 [indent-bot] standardised indentation
6452f8b (setup_sedov) removed compiler warnings
edee771 (setup_sedov) removed compiler warnings
713315a (analysis_dustydisc) now prints out information about each planet and added in condition to prevent segfault when not using dust
621946f [header-bot] updated file headers
321b177 (setup_sedov) added .setup file; cleaned formatting
51ab4ee (supertimestepping) corrected typo in comment
c77a987 [header-bot] updated file headers
8aa0c94 (setup_disc) #3 make it clear that bhspinangle in .setup is in degrees
3aad1d9 (setup_disc) #3 set planet sink mass position and velocity correctly for inclined discs; make it clear that angles in .setup are in degrees
b58bcd0 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
5de4b7f (slack) post to #commits channel instead of #status
20386d1 [header-bot] updated file headers
e58f19b (set_disc) use iext_einsteinprec rather than integer 11
0509fa8 (set_disc) remove unnecesary dependencies; bh_spin_angle can now be passed to set_disc (although it currently does nothing)
b4a2256 (setup_disc) #3 fix setting dust disc mass with mixtures
30ddbfa (setup_disc) #3 tidy up; remove unnecessary preprocessor ifdef in set_disc
c91d05f [space-bot] whitespace at end of lines removed
c797a24 [header-bot] updated file headers
2e758c5 (moddump_CoM) added file that will reset dump to centre of mass; this is required for plotting and some analysis
67b9e07 (setup_disc) #3 introduced subroutine to read most now obsolete disc setups; removed several obsolete setup subroutines
95099f1 [header-bot] updated file headers
da2b7c6 (setup_disc) print dust diagnostics to screen during setup: grain size, density, and Stokes number in the middle of disc
2b90e4e (dust) write tstop to file for 1-fluid as well as 2-fluid
54ed3c0 (setup_disc,set_disc,set_binary,set_flyby) #3 fixed checking of accretion radii and disc radii with Rochelobe; changed defaults for binary discs; set central object mass for call to set_disc more cleanly; call get_honH once in set_disc
0ec7faa (Makefile) #3 made some disc setups obsolete
0e898b5 (set_disc) fix bug introduced in MPI in setting multiple discs around a binary where discs are not placed around their sink particle due to indexing error
b0f299f (setup_disc) #3 calculate Hill sphere radius and print to screen; warn user if planet sink particle accretion radius is too large or small compared with the Hill sphere radius
f27d2d9 (set_disc,setup_disc) #3 implemented choosing disc mass by minimum Toomre Q; rearranged setting disc mass from sigma, etc.
56c1eb9 (setup_disc) #3 bugfix
46770ca (setup_disc) #3 bugfix after rearranging warps and inclined discs
e4c8618 (nightly) bug fix to slack message post
c7f0e2a (nightly/buildbot) added basic slack integration
b583de2 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
f3dedf4 (initial) enforced house style on quotes, format strings
0fb0563 (moddump) bug fix: reset I_WILL_NOT_PUBLISH warning after using moddump
754d73f (checksetup) more sensible check of sink particle h in case where softened with r_acc = 0
ec4f511 (step) added warning if damping is ON; also disable tolv iterations if damping is on
ee6aa8a (kdtree) silenced annoying warning about maxlevel > maxlevel_indexed if iverbose=1
1880792 [header-bot] updated file headers
0e2c134 (setup_disc) #3 added warps to setup_disc; simplified set_warp subroutine and renamed to set_incline_and_warp
688c7ba (setup_disc) #3 bugfix
e352f6d (set_flyby) fix get_T_flyby to return time of orbit from (-x0,-y0) to (x0,-y0)
47a050b (set_disc,setup_disc) #3 added black hole spin to call to set_disc in setup_disc; moved setting qfacdisc, ieos, isink from set_disc to setup_disc
2b2a660 [header-bot] updated file headers
01850c6 (setup_disc) #3 added Einstein precession option for external potentials
958346a (supertimestepping) removed compiler warningsb
186b52b (supertimestepping) removed compiler warningsstep_supertimestep.F90
bb48da0 (setup_disc) #3 allow flyby to have arbitrary inclination
6a946ab [header-bot] updated file headers
1e2a970 Merge branch 'master' of bitbucket.org:danielprice/phantom
3d25805 (setup_disc,set_disc) #3 allow disc to be inclined by any angle around any axis defined by a position angle; tidy up set planets in setup_disc
21db60c (supertimestepping) updated to be compatible with updated ptmass_create
696dfa8 (evwrite) bug fix from 648767b to correctly determine when to print
0f6bbb4 [format-bot] obsolete .gt. .lt. .ge. .le. .eq. .ne. replaced
648767b (evwrite) will print number of dead/accreted particles is > 0
ba5b8a0 (ptmass) passing rhomax_ipart for bookkeeping
3d5c801 [indent-bot] standardised indentation
9ec6a14 [space-bot] whitespace at end of lines removed
4cdcbec [header-bot] updated file headers
6823271 (setup_disc,Makefile) #3 removed obsolete SETUP variables in Makefile; tidy up in setup_disc
be5a5a5 (setup_disc) #3 set dtmax and tmax consistently
43238d3 (setup_disc) #3 added circum-primary and -secondary discs
7690f16 Updates to CE analysis
c0bc06e (sinks) BUG FIX with energy conservation in common envelope stuff -> reverted commit from 2016 causing this; gas particles now always interact across sinks
3df6f7c Merge branch 'master' of https://bitbucket.org/danielprice/phantom
f04d6e5 (conservation checks) reset conservation check flag during moddump
0cd413e [indent-bot] standardised indentation
3611487 [space-bot] whitespace at end of lines removed
8ecf8af [header-bot] updated file headers
0de60ba [tab-bot] tabs removed
b0b8b88 Fixed mapping and corrected mean molecular weight
42e92fb (dust) dust method choice (one fluid or two fluid) is now a runtime option; DUSTFRAC makefile variable no longer exists; to use dust set DUST=yes in the Makefile then set use_dustfrac in the setup routine (one fluid: use_dustfrac = .true.; two fluid: use_dustfrac = .false.)
ca15560 Added KEPLER ZAMS and red giant stellar models to data
4c87804 [space-bot] whitespace at end of lines removed
2863fdc [header-bot] updated file headers
0930fc9 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
85976c8 (pipelines) updated nightly testbot to run through all tests with/without DEBUG=yes [skip ci]
dc978dc (evolve) added number of particles to log file when using individual timsteps and injecting particles via print_dtlog_ind; perhaps not everyone wants this, in which case feel free to roll it back, but I find it helpful
80e8172 [space-bot] whitespace at end of lines removed
b99deb8 [header-bot] updated file headers
091eac1 (mcfost) Turning heating off when using mcfost+phantom
6677c96 (setup_disc) #3 added methods of setting the disc mass; removed obsolete setup_dustydisc.f90
051772d (mcfost) #2 Fixing Makefile for live mcfost+phantom
88745b5 (mcfost) Fixing Makefile for live mcfost+phantom
0d58689 (setup_disc) #3 set dtmax and tmax correctly for planets, and based on the orbital time at the outer disc for discs without planets or a binary
012b253 (setup_disc) #3 rearranged surface density profile function; sig_ref -> sig_norm is the sigma normalisation as defined in scaled_sigma function; set smoothed sigma at inner disc edge by default
e2534ba (setup_disc) f90 -> F90 for MCFOST preprocessor commands
5c02cf3 (galcen) made wind injection more accurate by tracking total particles injected for each star; gets rid of truncation errors of old method when a fraction of a particle should be injected
dad3c7e Adding MCFOST variable to Makefile
3213704 Turning cooling off in phantomsetup when using mcfost+phantom
3e51d29 (Makefile) removed obsolete SYSTEM=ifort17 variable and updated SYSTEM=ifort flags to pass make test
e1c10ee (tests) fixed testbot failures due to R_in=R_ref in call to set_disc
f7ec285 (set_disc) #3 set enclosed mass enc_m properly
62391cb (set_disc) #3 bugfix: fixed some testbot.sh failures and tidied up code
707dc2a (set_disc) #3 bugfix: unset variables and fixed warnings about unset scaled_sigma function
11f8a5c [header-bot] updated file headers
d02458e (setup_disc) #3 bugfix; give user choice of external potential
47acb00 (setup_disc) #3 split central objects(s) into 2 questions: sinks vs potentials; and how many sinks; added orbits.dat file compatibility with setup_binarydisc
e5cc06d (disc setup,Makefile) #3 bugfixes; removed some SETUPs; check in Makefile for obsolete setups and change to appropriate new setup
0c8e8bb (mpi/fastmath) pipelines failure fixed with getmathflags
60e8953 (pipelines) updated custom pipeline [skip ci]
aad0a21 (pipelines) added custom pipeline to run complete test suite
8811ffa [space-bot] whitespace at end of lines removed
3630959 [header-bot] updated file headers
207e39c (planetdisc) Added number of orbits to .setup file
45e688d (analysis) replaced magic number
3e61f09 (mpi) bug fix in gravity from commit 06d046e on 24 Oct 2017
46c1bb7 (analysis) modified dustmass and dustydisc analysis routines to work with 2-fluid dust
665f6f4 (dust) bugfix: for using dustfrac array as dust-to-gas ratio on gas particles and gas-to-dust ratio on dust particles; useful for reading dust density into mcfost
4525f65 write tstop to full dumps
4dfa1f5 (set_disc,setup_disc) #3 updated set_disc to use more general surface density profile
e6c5564 (evolve) moved log-file summary prior to end commands to get summary even on last step
b874004 (set_disc,setup_disc) #3 bugfix
9cef93b (set_disc,setup_disc) #3 sig_naught -> sig_ref: specify sigma at the reference radius
2f79ec3 (set_disc,setup_disc) #3 H_R HoverR correspond to H/R at R=R_ref the reference radius; fixed normalization of surface density function
e7a1c68 Disc setup: pitch angle => rotation around x-axis
42f8753 Flyby setup: roll angle => rotation around y-axis
b1d93a5 (setup_disc) #3 bugfix
b58f993 (setup_disc) #3 continued implementing unified disc setup routine; made conversions between mass and sigma more general
184ad59 (io) bugfix: fix array skipping
d2cfeae (mpi) fix for MPI implementations that do not support large tags
3d6a1ab typo fix
c3977e5 (setup_inject_stars) more realistic gmw (completely ionized) and more useful dtmax
9b21179 (inject_galcen_winds) add up partial wind-particle injections by only updating a stars tlast when a wind particle is injected
06d046e (mpi) fix for gravity summation when using MPI
960598f revert change from f048961fcfe9f71b9b03ae96eddf328b5a073d25
0c12282 Merge remote-tracking branch 'origin/master'
9ab7926 [header-bot] updated file headers
2a3f292 (setup_disc) #3 continued implementing unified disc setup routine; added flybys; simplified interactive setup
6af66a3 Merge remote-tracking branch 'origin/master'
f048961 (kdtree) fix test failures
bfcbb02 [space-bot] whitespace at end of lines removed
7dd480b [header-bot] updated file headers
4d56b1c [format-bot] F77-style SHOUTING removed
09c0836 (galcen) use specified mass resolution from .setup file
20564b3 (cooling) bug fix with read of cooling input file options
2b21071 (inject) print number of particles in dt log if global timesteps + injection
cb9422d (galcen) bug fixes with setup; read h_sink from .setup file
d2f915e Merge branch 'master' of https://bitbucket.org/danielprice/phantom
82ce233 (cooling) bug fix + added unit test of find_in_table routine; implemented t_floor
ad3bfbf Merge branch 'master' of https://bitbucket.org/danielprice/phantom
1670acd (cooling) fixes to sd93 cooling
a308e94 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
3d3cd44 (cooling) added module for cooling using Townsend (2009) method; routines compile but not yet tested
03699ce added interfaces for real4 and real8 functions like in the integer function
111d1e8 fix ifort uninitialized variable error with DEBUG=yes
ffa8287 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
16105b5 fix ifort warnings with DEBUG=yes due to array temporaries
89710c1 (setup_disc) #3 bugfix: set central stellar mass for disc correctly
85eac1b [header-bot] updated file headers
42337de Merge branch 'master' of bitbucket.org:danielprice/phantom
f5e5b1d [indent-bot] standardised indentation
fbcec29 [space-bot] whitespace at end of lines removed
0b5bcd9 [header-bot] updated file headers
1991d84 [tab-bot] tabs removed
414c41c (setup_disc) #3 started implementing unified disc setup routine; combines dustydisc, binarydisc, HLTau, and disc setup routines
5630d92 added mapping routine for ikepler; binning particles by mass
3ba3c70 [header-bot] updated file headers
eac767b [indent-bot] standardised indentation
6635a4b [space-bot] whitespace at end of lines removed
96d809e [header-bot] updated file headers
9b3448a [tab-bot] tabs removed
cdda272 (setup_spheres) reset default polyk=1; moved polyk~0.36 to choose_spheres option ikepler
1353652 (density_profiles) moved this back into src/setup from src/utils; bug fix in setup_spheres
687b2ce tidal disruption
1137812 tidal disruption
c6815a8 [space-bot] whitespace at end of lines removed
5ce551b corrected computation of thermal energy
60e87dc when outputting the bound/unbound status of the particles now also thermal energy is included on request
25f71ac Merge branch 'master' of https://bitbucket.org/danielprice/phantom
6d6e09c (analysis_dustydisc) fixed excess memory requirement when calculating scale height
51fba68 Merge remote-tracking branch 'origin/master'
6cf1685 Fixed issue with particle numbering in 2 fluid dustydisc setup.
4ad7802 setup_chinchen now compiles properly
0f422bd [space-bot] whitespace at end of lines removed
da21aac (mpi) disable exact epot calculation when nprocs > 1
ce3dfd6 (mpi) fix ptmass creation nacc check
a911649 (ptmass) fix ptmass creation test for when gravity is not enabled
e4c42c3 (mpi) gravity support for ptmass creation
8ba3ca6 (mpi) fix ptmass sink creation test
6a07d25 (mpi) fix rhomax bcast
1124354 (mpi) fix ipart_rhomax test
d9ddc81 (mpi) bugfix datatype for reduceloc
1710df6 (mpi) fix support for old disc setup routines
126a2f4 (mpi) testbot for mpi
84615a5 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
c75895b (mpi) fix test_link failure
6fb26ab bitbucket-pipelines.yml edited online with Bitbucket openmp needs to be disabled for mpi test to run other tweaks to get test to start
64cfbcc Merge remote-tracking branch 'origin/master'
e4d2561 (mpi) use native openmpi reductions when summing threads
e3b3a8b bitbucket-pipelines.yml edited online with Bitbucket use image with MPI
0af3191 bitbucket-pipelines.yml edited online with Bitbucket add mpi test
5b0c79a (mpi) fix testgrav failure for non-mpi
01fa83d (mpi) better subroutine name for mpi utils
6ae84a2 (mpi) bugfix with ipart_rhomax
dc13586 (mpi) fix testgrav build failure
f510d81 [indent-bot] standardised indentation
b7c3bde [header-bot] updated file headers
ad5d2d7 Merge remote-tracking branch 'origin/master'
fdee1ce (mpi) add mpi support for sink particle creation
8bc049b (mpi) add mpi support for sink particle creation
e274043 (mpi) neighbour finding bugfix
275059a (test) return error code if testsuite fails; should then fail bitbucket pipeline
7c414be Merge branch 'master' of https://bitbucket.org/danielprice/phantom
b857cae (mpi) fix blob build failure
04ebdb7 (test_link) test failure fix
93aa6b6 (setdisc) build failure fix
2c30541 (dens) fix build failure
5be9e69 [indent-bot] standardised indentation
3ff67b1 [space-bot] whitespace at end of lines removed
a5434b4 [header-bot] updated file headers
843d639 (dens) removed unused vwave function
b74c00c (mpi) neighbour finding bugfix
0c0cbfb (mpi) remove unused imports
5e356c1 (mpi) neighbour finding bugfix
a68a4ad Merge branch 'mpi-ptmass'
6b3d09d (mpi) amend previous merge
442c2a2 Merge remote-tracking branch 'origin/master' into mpi-ptmass (ptmass) amend previous commit
5578392 moved density profiles module into setup directory
c43346d [header-bot] updated file headers
039d6d0 (energies,ptmass) removed accreted madd & accreted energy from .ev for sinks; re-added accreted mass into Sink.ev
1e88069 (mpi) consistency in link test
7d2201b Updated moddump_binarystar to reset conservation values
ac95d8c [indent-bot] standardised indentation
940fe01 [space-bot] whitespace at end of lines removed
cd44dc3 [format-bot] obsolete .gt. .lt. .ge. .le. .eq. .ne. replaced
4830220 Updated moddump_binarystar to also adjust existing binary setups
2cc2a5b Merge branch 'bugfix' into mpi-ptmass
6db2d32 (mpi) revert change, was incompatible with omp
fa98600 Merge branch 'bugfix' into mpi-ptmass
7598ed8 (mpi) revert change, was incompatible with omp
4d5f78d added exclusion of conservation checks to setups with injected particles; in future this should be accounted for by relevant bookeeping
9f731f8 Merge remote-tracking branch 'origin/master' into mpi-ptmass
631fabc (mpi) omp barriers
d0f4a99 (mpi) fix for when thread for when thread has no particles
cb9c975 (mpi) amend 13c101e019fdfc4aacf44f7ceb637e4cf86af9ad
c90876b (mpi) fix balancing check not recognising already dead particles
d3504e9 (mpi) linklist test bugfix: kill particles properly
8a5f515 (mpi) improve MPI reliability for particle balancing
13c101e (mpi) request tidyness, use dummy for count checking
a0e8613 (mpi) bulletproof MPI cell exchange
704c529 (mpi) match MPI source to ireq array
c90a438 (mpi) cleaner stack swapping
312ac30 (mpi) add error for memory allocation
8b40653 (mpi) memory addressing bugfix
cc1e151 (mpi) bugfix calculating centreofmass
7e3425c (mpi) clean up unused variables
3c33286 (mpi) bugfix: need hpart for all particles
de79514 (mpi) better RNG consistency for disc setup
f6c0771 (mpi) fix missing h/H calculation reductions
c12958e (mpi) give every thread a different random seed in disc setup
01227ba build failure in phantomevcompare fixed
25d41b3 Merge remote-tracking branch 'origin/master' into mpi-ptmass
c03dade (mpi) fix test testcyl failure
f3bfc52 (ptmass) default value for f_acc is 0.8; much faster
902e375 build failure in phantomevcompare fixed
d5e561d (mpi) optimization remove repeated comm_dup
1d75b55 [space-bot] whitespace at end of lines removed
52f569a [header-bot] updated file headers
5501062 [format-bot] F77-style SHOUTING removed
3df2598 Merge branch 'master' into mpi-ptmass
b1c9a53 [CE Analysis/MESA EoS] Mild changes, hopefully nothing breaks.
74384ec [header-bot] updated file headers
9aae8d0 (ev2mdot) bug fix with identification of accreted mass when column is different in different files
c0aed1f (ev2mdot) further BIG overhaul: now works as expected; more modular; works on multiple files that are NOT in a sequence
7b00add (ev2mdot) updated writemake script
39f07bd Merge branch 'master' of https://bitbucket.org/danielprice/phantom
bc5fca1 (bots.sh) obsolete comment removed
70c1dc3 (utils_evcompare) renamed to utils_evfiles.f90
d4215c9 (ev2mdot) overhaul of ev2mdot: recognise column position automatically; delete obsolete ev2mdotsink, ev2mdotbinary as these cases now handled automatically by ev2mdot; removed dependency on io module
0dd4e62 (shoutbot) added couple more automated shout removals
dbcca2f (mpi) bugfix in dtextforce reduction
f579469 (mpi) always copy divcurlv, consistent with copy_particle
53e9562 (mpi) mpif90 is deprecate as of openmpi v1.7, use mpifort instead
f9482b2 Merge branch 'master' into mpi-ptmass
fbfd0c1 (Makefile) fix gfortran 7 compile error
883c471 (force) small bugfix
d7ae297 Merge remote-tracking branch 'origin/master'
6f9d2db (non-ideal MHD) coefficients are now calculated in dens.F90 and stored in an array for use in force.F90; improves performance by a factor of 1.6-1.8
1294083 (test_nimhd) testfailure fix
83600c9 [header-bot] updated file headers
a7a6078 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
384eb5c (super-timestepping) debugged; added rudimentary sts test; removed compiler warnings
2e631f6 (ptmass) test failure tolerance increased to avoid fail with DEBUG=yes
5a73fbc (mpi) fixes
60894f4 [header-bot] updated file headers
26fb372 (header) if DEBUG=yes, will now state this in the header of the log file
29ac75f (energies) bug fix with rms velocity and Mach number (missing sqrt)
034d43f [indent-bot] standardised indentation
3b8b525 (test_nonidealmhd) now tests to ensure that boundary particles are correctly initialised
d547275 (boundary particles) fixed again
a5b634a (mpi) copy missing fext required for ptmass
6ce0bb9 (mpi) update rndisc setup for mpi
8af4b6c (mpi) rearranged cell communication
d447ded (mpi) seperate subroutine for updating ptmass
ad3bb40 (mpi) tidy ptmass subroutines
614e563 (mpi) solve nonperiodic mpi incompatibility using masks instead
0e732ee (mpi) mpi compatible selection of test particles in testderivs
36d2421 (mpi) remove old subroutine
a786f33 (mpi) fixed COM adjustment in setdisc for mpi
68803d1 (mpi) MPI disc setup, minor code reorganizing
e16bad1 (mpi) store sink mass force contribution seperately
8ef831e (mpi) bugfix when thread has no parts
59eb5a4 (mpi) fix accreted particles going missing bug
7786947 (mpi) ptmass test mpi setup
e469580 (mpi) allow for zero size global tree nodes
6e5c151 (mpi) remove unused ptmass_old variables
e3b534e (mpi) fix mpi ptmass conservation error
02da893 (mpi) remove unused import
0b860ba (mpi) fix test suite for ptmass
5406f77 Merge branch 'master' into mpi-ptmass fix bad merge
b1e5acc (evolve) increased frequency of calls to energies undoing commit
ddfe75f (energies) fixed test failure
1f5a5b5 (evwrite) rewrote energies & evwrite again to remove incredible slow-down introduced in the version from commit 7e9383c
7c623ab (mpi) add mpi to test_ptmass
5b993e7 (mpi) keep epot_sinksink on master only (reverted)
b0ec685 (mpi) bugfix ptmass test
a248eb4 (mpi) non master threads init epot_sink=0
3681d84 (mpi) only add ptmass energy contributions on master thread
f15cbdc (mpi) enable ptmass test for mpi
908551b (mpi) sink particle support
a377245 fix compiler warnings
77d0fa6 Merge remote-tracking branch 'origin/master'
c2d98d4 fix compiler warnings
0a62522 [indent-bot] standardised indentation
fd992fd [header-bot] updated file headers
0bb5bb0 Merge branch 'soa'
74b9498 (soa) ptmass gravity cache soa ordering
ce06fee (soa) lower roundoff error when gas particles are not present
0ee116a Merge branch 'master' into soa
1f19148 (ptmass) fix previous attempt at fixing ptmass accretion
9fbac11 (ptmass) fix compiler warnings
186489f (ptmass) fix compiler warnings
8ca7048 [indent-bot] standardised indentation
0e91e35 Revert "(evwrite) bug fix: fixed some of the slowdown caused by evwrite"
bab0468 (soa) soa cache ordering for ptmass
6e7a868 Merge branch 'master' into soa
d680fa0 (evwrite) patch afe3a58e24ffd8967cc1651665304c54f41d7504
8174831 (soa) soa cache ordering for ptmass
8afb373 Merge branch 'master' into soa
8943037 Merge remote-tracking branch 'origin/master'
8f56f0e (ptmass) fix sink particle accretion
ea63019 (evwrite) workaround for slow evwrite routine: call less often
afe3a58 (evwrite) bug fix: fixed some of the slowdown caused by evwrite
b5cb8d7 Merge branch 'master' into soa
84e3720 (checksetup) allow restart of two fluid calculations with one fluid method with setting of environment variable
4401bb1 (readwrite_dumps) return error code if failed to read dump file header
1337e75 Merge branch 'master' into soa
b7fe14b (mpi) optimization: global tree refinement
3e3c808 (mpi) optimization: reuse local tree if global tree is built
e3c16d0 Merge branch 'master' into soa
1ec9a5f (mpi) fix temporary array warning
f810672 (soa) soa array naming consistency
6bc53b0 (soa) bugfix: stray PP flags
a3ecec7 Merge branch 'master' into soa
a54b44d added SYSTEM setting for the Lyon CCF cluster
5088b40 [indent-bot] standardised indentation
bc96b74 (mpi) optimized memory management for MPI communication
f517792 (mpi) fix rwdump not reading npartoftype properly
c7eb936 (mpi) clean up unused variables
c9f32da Merge remote-tracking branch 'origin/master'
29a2dec (mpi) optimization: better cofm reduction
f62f5e9 (dens) compute gas density on dust particles and store in dustfrac as gas-to-dust ratio
74b477e (test_derivs) fix new compiler warnings
6777dd6 Merge remote-tracking branch 'origin/master'
1f15b05 (mpi) massively reduced verboseness of test suite
8dc9a27 (testkd) make testkd shortcut added to Makefile
142d19f (mpi) return error code with rwdumps error message
6249577 (mpi) bugfix for indts derivs test
6f4bc9d (mpi) bugfix for testkd derivs with mpi
97bd84d (mpi) fix buffer filling for mhd
83d3c03 (test_dust) bugfix uninitialized mhd variable
901f66b (test_sedov) fix rare segfault
8fbbcb1 Merge branch 'master' into soa
62b014a (mpi) allow global maketree to proceed without local parts
f6def00 (mpi) remove unused lines
6ea5ea4 Merge branch 'master' into soa
4057bb1 Merge remote-tracking branch 'origin/master'
78d8433 (mpi) fix crashes for pathological arrangements, better load balancing
2bbe5ff (mpi) fix erroneous insufficient particles message
821f1cd (mpi) add interface for int tree group reduction
10473df (mpi) update particles-in-a-line setup for MPI
c277bb1 pipelines does testkd not test by default
b01dfd3 build failure in testkd/testcyl fixed
de114ed Merge branch 'master' into soa
e5d7e1d Merge remote-tracking branch 'origin/master'
7870d18 (mpi) remove unsafe tree construction split, loop fission
133fd7d [indent-bot] standardised indentation
cd08dc4 [header-bot] updated file headers
caa6880 (mpi) sped up sedov test by factor of 20
647be81 (mpi) bug fix with initial mass in sedov test
7a843f4 SEG FAULTS FIXED in mpi tests
d6c2562 (mpi) test_link less verbose
4235f95 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
059004d testsuite returns *total* number of failures across all threads via checkval routine
796af5f Merge branch 'master' into soa
bfc0410 (mpi) remove old revtree comments
c55da37 Merge branch 'master' into soa
6a3bf9f (mpi) improved memory management
73a6141 (mpi) less verbose testsuite with MPI; reduces results across threads
571ebb4 Merge branch 'master' into soa
a665a30 Merge remote-tracking branch 'origin/master'
c84b612 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
55ce7f8 (mpi) bug fix with particle mass in dust diffusion test
a1e1298 (mpi) remove old code
a166d70 Merge remote-tracking branch 'origin/master'
17599fd (mpi) bug fix with dustybox test with MPI
7e40104 (test_step) remove hacks from before mpi-setup
f432aee Merge remote-tracking branch 'origin/master'
55f38c6 (test_derivs) remove hacks from before mpi-setup
3bb7095 (set_unifdis) mpi-aware particle setup
c5c80ed Merge branch 'master' into soa
b7c3085 (bugfix) stray #ifndef
8bc88b3 Merge branch 'master' into soa
bc1cc54 Merge tag 'ok-20170609'
1a37561 (mpi) enable dust test for MPI
da7efa1 (energies) bug fix when calculating densities for multiple particle types; bug introduced on 15 May 2017
b7387f2 (energies) preventative compiler warning; performance enhancement for non-ideal MHD
87c881a (h2cooling) avoid real==0 comparison, use abs(x) < tiny instead
9452533 compiler warnings fixed
186f268 build failures with single precision build fixed
023014b [indent-bot] standardised indentation
23746aa [space-bot] whitespace at end of lines removed
3d9cda7 [header-bot] updated file headers
b011c24 [format-bot] obsolete .gt. .lt. .ge. .le. .eq. .ne. replaced
f0b5219 Merge branch 'master' into CO-cooling
52f9936 (test_ptmass) reset force to zero before test to avoid previous test failure; further minor cleanups
e68776f test failure fixed, minor cleanup of test_gravity
94a6a86 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
61361da build failure with SETUP=blob fixed
dc7fdd5 bitbucket-pipelines.yml edited online with Bitbucket
f2a6218 bitbucket-pipelines.yml edited online with Bitbucket
f51a4dd bitbucket-pipelines.yml created online with Bitbucket
d9d8476 (nonideal mhd) prevented complier from making/passing temporary arrays into nicil
2f7dfd4 (energies) corrected averages to be over gas particles and not total particles - pls see comment
f872e4a (test_nonideal) build fix
e5c0a55 (soa) counterpart to 69cc3b6dc5a502466982a74d16bf04314e3eb596
04066e9 Merge branch 'master' into soa
69cc3b6 (mpi) include all particles when relinking
17c01d6 Merge branch 'master' into soa
4e6853d (mpi) add more missing send buffer quantities
adc5c95 (mpi) add missing send buffer quantities
4402fab (mpi) add check for npartoftypetot header value matches actual
0d1b97a [indent-bot] standardised indentation
4ececd0 [space-bot] whitespace at end of lines removed
e9cdfea [header-bot] updated file headers
35e4a9f [format-bot] obsolete .gt. .lt. .ge. .le. .eq. .ne. replaced
c68f2f0 (test_nonideal) corrected comments from previous commit
6a6a841 (test_nonideal) added test to calculate non-constant eta coefficients
ebbc6f7 (test_nonidealmhd) added a test of non-ideal mhd to the nightly build; will also check boundary particles
aff9641 (setup_shock,setup_wavedamp) defined Bevol(4,:) to prevent crashing with debug=yes
08c758a (dens,step) trivial format changes to line up variables
aca2fd2 Merge branch 'master' into soa
e0aef92 (testlink) testkd bugfix
3356530 (mpi) bugfix for tree building for strange particle configurations
2faef68 Merge branch 'master' into soa
7e54dc8 (mpi) support for multi-type dump reading
bdea983 (testrwdump) disable single array read test when using MPI
b340b65 (testrwdump) disable single array read test when using MPI
e9e3beb Merge remote-tracking branch 'origin/master'
32d0a14 Merge tag 'ok-20170601'
e169014 (energies) bug fix to prevent division by zero in nimhd calculation with constant eta
f4da2b8 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
a0f87a0 (test_gravity) looped the directsums test to test all non-boundary particle types
fbfe183 [indent-bot] standardised indentation
0af9240 [space-bot] whitespace at end of lines removed
22c1407 [header-bot] updated file headers
e9863a8 (force) bug fix in calculatinv gravity if multiple particle types
429f2db (evwrite) will only print accreted mass to screen if required
dbce9a5 (energies) bug fix win ev_get_valus & ev_data_correction - only affected selected outputs
98e1f47 linear momentum catch for externalforces
6781a36 added softening function to barr+spiral potentials
ba07def (scripts) added a python script to write evsplash.columns from a .ev file
676dacb (part) pack vpred into buf
e0082ee (kdtree) update to previous commit for kdtree test
ef93b3b (kdtree) remove unused vxyzu from maketreeglobal
95d54b0 (kdtree) remove unused vxyzu from maketree
beb7714 (mcfost) deallocated dudt and Frad
301d4ca (MHD) removed kind conversions in Bevol calculations
998a634 (readwrite_dumps) bug fix when trying to write pressure to file if isothermal=no
60e859b (setup_sphereinbox) minor cleanup
1bfff93 Merge branch 'master' into soa
83ad515 (mpi) tidy unfill_buffer to match fill
ee18f1c (mpi) update test_step for mpi
a91bf62 (mpi) bugfix mpi array size
8e396d5 (soa) remove old code
cdd5842 [space-bot] whitespace at end of lines removed
e96bff2 [header-bot] updated file headers
bd5bec3 (soa) ind timesteps indexing fix
4610fc0 (soa) buildfix
a01fa16 Merge branch 'master' into soa
9a29ab0 Merge remote-tracking branch 'origin/master'
95e81cd (mpi) bugfix: when refining global tree, use deepest communicator
6da5464 (sfmcfost) preparation for implicit dudt
e943a28 (mpi) remove MPI_PARALLELREAD option
a375438 (mpi) global tree build indexing bugfix
b3d4cef (mpi) use max wall time when checking for dtmax decrease
0574c3f (mpi) fix bug with fill_sendbuf
1d41f0b Merge branch 'master' into soa
00197c7 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
0b44acb build failures fixed
11dd30e (test_derivs) made compatible with B being double precision
ba69911 (energies) removed unused passed variable
07e054a (force) bug fix to prevent passage of variable outside of array bounds
c725b88 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
02266d2 (mhd) magnetic field now stored in DOUBLE PRECISION
9a755ad moddump_binarystar added bulk velocities
73b8e30 [header-bot] updated file headers
3353b1d Merge branch 'master' into soa
3bbf953 (soa) fix indexing error
a9a0067 (setup_dustydisc) added separate dust disc q index and H/R for 2-fluid
2263f95 CO cooling now compiles and runs
db580e8 (mpi) reduce verboseness in rwdump tests
3c99668 [indent-bot] standardised indentation
d04b049 [header-bot] updated file headers
32cd627 Merge branch 'master' of https://bitbucket.org/danielprice/phantom into CO-cooling
d5510a5 (soa) write to soa arrays after periodic crossing
f5a8b9a (kdtree) bugfix setting inodeparts to negative for individual timesteps
c95b6a7 Merge remote-tracking branch 'origin/master'
e108d24 (test_link) adjust kdtree test for soa restructure
d897060 Update effective number density used in CO cooling to match Glover et al (2010) version
4a9d84a Add missing chunk of code needed to set up the CO cooling tables
14dbdfd update global maketree to soa
26c9403 global maketree bugfix
98d3510 (evolve) bug fix when timing subroutines
b3425f8 (dens) bug fix when using boundary particles
d0b2ef2 My previous commit was dumb Re:CO cooling, reverting
8cf4b54 (soa) bugfix for checking if global tree build
f55068b Merge branch 'master' into soa
5cee97d changed variable names so mol_data and h2cool are consistent
00ffdfc Merge remote-tracking branch 'origin/master'
cdabcdc (mpi) allocate communication arrays dynamically
5c269c4 (mpi) bug fix compiling mpi code with gfortran
e172ff8 [header-bot] updated file headers
6bca4fd (evwrite) removed mdust and mgas from .ev file; may prevent future crashes in dust tests
61fc380 remove debugging statement from evwrite causing failure to print energies to log file
463d594 Adding parameter to select the ISM radiation field
ddd8a5c (analysis_GalMerger) added mean and maximum densities to output
8fcf903 (energies) build faiulure fix
762dba0 (evwrite) bug fix to fix build/test failures
b002fe0 (evolve) will not try to decrease dtmax if dtmax_rat0=1
668f721 Merge branch 'master' of https://bitbucket.org/danielprice/phantom into CO-cooling
ef15e0b (analysis_mcfost) added ISM heating
f6f2533 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
9ae2a1b [indent-bot] standardised indentation
67f5c3c [header-bot] updated file headers
f2a11f5 (evwrite) cleaned energies.F90 by compiling more data via ev_data than through individual scalars; added more values to .ev
0f8839b (evwrite) added check to ensure that duplicate actions are not requested for the same quantity
c770c95 (evwrite: non-ideal mhd) removed n_e/n_n and replaced it with n_i/(n_i+n_n) and n_e/(n_i+n_n)
7e9383c (evwrite) rewrote energies & evwite to be more user-friendly to developers; instructions now included in the header
a6034d1 (sfmcfost) use LIGHTCURVE=yes
b0326c4 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
8d39d78 (sphereinbox) set gamma=5/3 if compiled with adiabatic EOS
e929426 Merge branch 'master' of bitbucket.org:danielprice/phantom
56cb709 fix buildtestfail
6a6e0e3 [indent-bot] standardised indentation
eb6bd5d [header-bot] updated file headers
088e71a (mpi) optimization: use persistent comms for tree construction. Reduces overhead of creating and freeing comms on the fly each time tree is made (communicators dont change).
8de9455 added SETUP=sfmcfost
06c91b6 bug fix when resetting u when restarting adiabatic simulation from an isothermal one
be92096 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
acc23e6 added sensible queue defaults for SYSTEM=complexity
c78ca29 Merge branch 'master' of bitbucket.org:danielprice/phantom
f76c1eb silenced annoying warning about NCELLSMAX after first one
b032c88 (force) fix new warnings from unused variables
6695521 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
7f5b7df added SYSTEM=complexity for complexity.leicester.dirac.ac.uk
aedc5fc [indent-bot] standardised indentation
0f941ac [header-bot] updated file headers
7f3ef9c Merge branch 'master' of bitbucket.org:danielprice/phantom
a0d6fad (mpi) recombine remote cells inline to reduce memory usage and need for data copying. reorganise mpi data structures
2a4763a (evwrite: non-ideal MHD) removed number densities of elements from .ev files
e78c0b6 (format) removed blank line from previous commit
f2e07e5 (conservation laws: test_sedov) fixed test failure by initialising variables requried to verify the conservation laws
4498ddb [header-bot] updated file headers
51d063d Merge branch 'master' of https://bitbucket.org/danielprice/phantom
241c65b uninitialised variable bug fixed in testsuite
679b3ea (conservation laws) moved setting initial values for conseravtion laws from evolve to initial and added output to logfile
cc51148 [space-bot] whitespace at end of lines removed
663dc8c [header-bot] updated file headers
ad87a7c (conservation laws) removed debugging print statment from previous commit
a189655 (conservation laws) initial values from the first step are saved in the dump files to allow for continuity in baseline upon restarts
66d9d87 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
60da514 (mhdvortex) setup runs with default parameters; warnings fixed
59f14d1 (setup_sphereinbox) interactive questions assume medium is a cube, and ask for edge length as a multiple of r_sphere; interactive questions ask about forming sink particles and their size
b1687e8 (readwrite_dumps) bug fix when writing pressure to dump file; also writes pressure to dumps for ieos=8,9
493ab50 bug fix with default parameters in wave damping setup
4533bb0 bug fix with default shock tube choice for nimhdshock
6abdca6 cleanup of mhdsine setup routine
743b7a0 test failure fixed
b257dbc (warp) setup file uses prompt command instead of reading unknown option
4781f92 (turb) turb setup uses prompt to pass setup tests
0890e55 bug fix (broke buildbot)
32544f5 (buildbot) added ability to check phantomsetup runs and produces .in file (not yet activated)
1032866 testgrav tolerances adjusted after 3106974
167dd92 adjusted AM tolerance to pass on test2
e57af13 (mhd) use div B with difference operator when evaluating h|divB|/|B|, consistent with what is written in Phantom paper
d3c93c1 kill_particle routine can (optionally) decrement npartoftype; fixes bug with steady disc stuff
b16c095 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
8db185f fixed Taylor-Green setup to not require unspecified user input
3c13dd0 bug fix with copy_particle routines: missing arrays included
8d24d1e major restructure for maketree: transition to soa arrays, remove linklists uses additional array alongside xyzh for legacy support preparation for MPI optimisations adjustments to test suite: - remove linklist test - disable revtree test (revtree not restructured, and not used in current code)
e05cb3c Merge branch 'master' of bitbucket.org:danielprice/phantom
a8ef0c2 (mpi) cell datatype padding for data alignment
e0ffa7f bug fix with changeset links in nightly build email
a0e4877 clean up vestigial code
3106974 (kdtree) fix for very deep unbalanced trees For highly regular particle configurations such as ICs, tree construction may identify the wrong axis to pivot. Resolved by using actual box occupied by particles in a node, instead of splitting previous node in half.
4908f74 (mpi) use bcast to sync thread times instead of reduction
604fa15 Merge branch 'master' of bitbucket.org:danielprice/phantom
230c697 (mpi) make stacksize a fraction of maxp
7bfb247 reactivate xyzcache in density and force, some tidying
4c6f117 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
ee7e4cc tolerance adjusted - hopefully all test failures now fixed
eb455ee [indent-bot] standardised indentation
edafd06 [space-bot] whitespace at end of lines removed
a8d0134 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
6ed44c5 Slight change to finish_eos subroutine.
f890d6c Merge branch 'master' of bitbucket.org:danielprice/phantom
5ecf359 (mpi) Makefile option for communication stack size
038fd70 (mpi) reduce cells communicated by prewalking remote tree
0679025 (dens) cleanup
5298ecd Slight update to common envelope analysis
99a746d adjusted tolerance to prevent test failure in test2
d4b2bf6 turn on indent-bot in nightly build
9de181b [indent-bot] standardised indentation
e193c2e added typical walltime for monarch with make qscrupt
544f352 tolerances adjusted to fix testgrav failures
0dd2b8b [format-bot] end if -> endif; end do -> enddo
28d8cb9 [header-bot] updated file headers
2abf181 [format-bot] obsolete .gt. .lt. .ge. .le. .eq. .ne. replaced
9b56fbe (setup_sphereinbox) removed project-specific setup variables
7fb46ab (scripts)(cluster) modified plot cumulative IMFs - same as in paper.
83e03e7 (mpi) Makefile bugfix: typo in a4b0492c1558e16145a3005d832d347560f792fb
79ec713 Merge commit '0068d10ac5b0d32702bfd73e1871b63cbf7fb731' into mpi
0068d10 [space-bot] whitespace at end of lines removed
1d6b4bb [header-bot] updated file headers
8f8fd10 (mpi) safety
e04e8bd missing messages bugfix same fix as for balancing: message go missing when done message arrive sooner fix: use same communicator to ensure all cells are received first
ab55524 (moddump_binarystar) added initial moddump to duplicate a relaxed star to form a binary
fa41f24 (mpi) Makefile: systems for PSXE on monarch and mac. hardcode dependencies so that setup compiles.
44f8591 (mpi) fix evwrite bug: all threads need to call init_evfile
0e70504 Add CO rotational cooling
689b634  Make velocity divergence available to cooling function
c5e7b92 (mpi) tidy routines
cc10432 (mpi) MPI pp flags for stack.F90
58eccfd Merge commit '40690cabd553002adae3fc4e5d2623b2d6b9ed70' into mpi
40690ca (set_binary) print true anomaly to screen
7dba7e9 Add no-op entry for CO cooling
cb4352e Don't extrapolate rates off end of cooling rate table
764e2cb Add CO rotational cooling data
d16000f Pass current CO abundance into cooling function
37f7fc3 Fix typos in comment
5048b3a Merge branch 'master' of https://bitbucket.org/danielprice/phantom
9e083d7 (set_binary) bug fix with conversion of true anomaly to eccentric anomaly
fa14c0c [header-bot] updated file headers
acb85bc (Makefile) added SYSTEM=monarch; also make qscript works for SLURM queueing
6306f30 (binarydisc) added option to create sequence of orbits from orbits.dat file
639508a (binarydisc) renamed binary parameters to be more readable
ab7ff00 (set_binary) allow specification of true anomaly of binary
3eb1056 (test_derivs) test failure/uninitialised variable problem fixed
769cd58 (mpi) tweak for kdtree dtype, no need for additional array creation
2b24854 (mpi) bugfix: missing omp for dustfrac
4015a8d (mpi) fix fpe when DBUG=yes
a4b0492 (mpi) disable dust test for MPI
1e56dad (mpi) restore missing bits from merge
b769e61 (mpi) cleanup, adjust test for mpi
840ce31 [header-bot] updated file headers
1153598 (mpi) fix missing particles problem Old implementation was not safe, dependent on MPI implementation. Completion signal could arrive before all particles have been received. Fix: Send completion signal using the same comm as particles. Relying on order preservation of messages, this ensures the completion signal doesnt get processed before all of the particles.
820c376 (moddump_removeparticles_radius) moddump to remove all particles inside a particular radius
9d79ac5 (test_rwdump) test read/write dustfrac array with 2-fluid
c71f626 (readwrite_dumps,utils_dumpfiles) read dustfrac (dust ratio) array for 2-fluid
61eeb8e (mpi) fix part buffer size, bug introduced when merging mpi
fde848c (mpi) bugfix: missing arguments
515f891 (mpi) pp flag indentation fix
416787a (mpi) fix error message for multiple types when MPI=yes This was previously not implemented correctly, missing some imports and declarations
d131428 Merge commit '84d58d5b08bec0bbc2356ae41c46b7ab36ed4c78' into mpi
84d58d5 (analysis_mcfost) pass velocities to MCFOST
7403d07 (mpi) bugfix: always ignore self-contribution when MPI=no Was previously not defined, which caused issue where OPENMP=yes would fail (but pass otherwise)
2f20436 Merge commit 'a23808d63cb407a5ad0a66e9df64d5d29f475444' into mpi
a23808d [header-bot] updated file headers
f72ed8f (setup_orstang) will now read/write .setup file; will prompt for more parameters; uses reasonable tmax, dtmax; general cleanup of format
f6d7bc6 (mpi) implement fgrav passing using cells
28cec43 (mpi) Makefile: use updated openmp flag
2c55edb (mpi) fix build for sgdisc analysis - Make npart intent(in) only when MPI=no. Shouldnt break anything since analysis routine is not written for MPI anyway. - Fix Makefile depedencies. - Remove unused imports.
cfd92fc (mpi) fix compiling in single precision, minor declaration fix from previous commit
308d7b3 (mpi) fix building with GRAVITY
910912f (mpi) fix SETUP=rndisc build. Remove unused code (as in master), add missing import.
ed80e72 [header-bot] updated file headers
650057a more files merged from mpi branch
c82a0d8 more files merged from mpi branch
87454f1 merged checksetup and phantomsetup from mpi branch
8428ae4 (mpi) splat!
474660a tolerance adjusted to pass with ifort
21361bc Merge branch 'master' of https://bitbucket.org/danielprice/phantom
fcf643b (test_ptmass) tolerances adjusted to pass test with gravity; also tightened tolerances on binary orbital integration
68113ae [space-bot] whitespace at end of lines removed
6af72f6 [header-bot] updated file headers
1a56606 (makefiles) date updated
73c7963 (binary; binarydisc) conventions match those in imorbel; can be used to set up binaries matching observed orbital arcs
88197d2 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
58bbfbc (testbot) include ptmass tests in testgrav run; set tree_acc=0 for this so disc tests pass
32fb353 (ptmass) added test for ipart_rhomax; added close routine for sink .ev files
581e3f1 (evolve) revised conditions for stopping if AM conservation violated
c715fb2 [header-bot] updated file headers
92ab1f5 Merge branch 'master' of https://bitbucket.org/danielprice/phantom
3c32de2 (test_setdisc) bug fix: units need to be set so that G=1
a664191 (analysis_mcfost) fixed segfault issue on some machines
58e1d69 (Makefile) added SYSTEM=ifort17 for Intel compiler 17.0 compatiblity
e276c2e Turning cooling off in phantomsetup when using mcfost+phantom
a93004a (readwrite_infile) removed whitespace from infiles
522ddb1 Option in Makefile to link directly with mcfost *.o files (for degugging)
6222d95 Adding option in the phantom/mcfost interface to write temperature fits files
3f9c71a (nightly) bug fix with links in nightly email
3628011 (bots) bug fix: create logs directory if does not exist
009a137 bug fix in check for dust mass conservation: allow dust mass to decrease because of accretion
fecc5a9 (checksetup) warn about particles with dustfrac=1
75374dc Merge branch 'master' of https://bitbucket.org/danielprice/phantom
f2d3f10 (nightly) updated nightly build for new repo; also push to website not wiki
6a4af73 (bots) updated build/test bot: no longer write wiki files
83a92c9 added compiling flags so it runs on hydra.rzg.mpg.de
8c40835 [space-bot] whitespace at end of lines removed
7a88397 [header-bot] updated file headers
fb07dfb [tab-bot] tabs removed
cd6bf92 (analysis_dustydisc) Added dust mass and accreted mass by planets
f46e7d2 (setup_shock) bug fix to define z-boundary if not close-packed; removed duplicate variable definitions
90dafde (summary) bug fix when listing density of sink particle candidates
fca5cc5 (setup_shock) modified Brio-Wu shock conditions to match the Phantom paper; will read/write shock name to .setup file
d4de5c3 [format-bot] end if -> endif; end do -> enddo
e97d5e3 [space-bot] whitespace at end of lines removed
ae48419 [header-bot] updated file headers
af4adb0 (wind) Bug fix, redundant variable removed, improved default parameters
59fb47a start of public code git repo
